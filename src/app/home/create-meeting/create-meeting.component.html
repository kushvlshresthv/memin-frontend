<dialog
  appSafeCloseDialog
  #new_meeting_dialogue
  class="main-dialog"
  [formGroup]="formData"
>
  <!-- Left Panel - Member Selection -->
  <div class="invitee-selection-panel">
    <div class="panel-header">
      <h2>Select Members</h2>
      <p class="panel-subtitle">Search invitees for the meeting</p>
    </div>
    <app-select-invitee-for-meeting></app-select-invitee-for-meeting>
  </div>

  <!-- Right Panel - Meeting Details -->
  <div class="meeting-details-panel">
    <div class="panel-header">
      <h2>Meeting Details</h2>
      <p class="panel-subtitle">Meeting meeting information</p>
    <button class="btn btn-primary save-button">Save</button>
    </div>

    <form [formGroup]="formData" #meetingCreationForm class="actual-form">
      <div class="form-group">
        <label for="meeting-title">Meeting Title</label>
        <input
          id="meeting-title"
          type="text"
          placeholder="Enter meeting title"
          formControlName="title"
          class="form-input"
        />
        @if (title.touched && title.dirty) {
          @if (title.errors?.["required"]) {
            <p class="field-error">Meeting title is required</p>
          }
        }
      </div>

      <div class="form-element-pair">
        <div class="form-group">
          <label for="meeting-date">Meeting Date</label>
          <input
            id="meeting-date"
            type="date"
            class="form-input"
            name="meetingHeldDate"
          />
        </div>

        <div class="form-group">
          <label for="meeting-held-time">Meeting Time</label>
          <input
            id="meeting-held-time"
            type="time"
            placeholder="Meeting time"
            class="form-input"
            name="meetingHeldTime"
          />
        </div>
      </div>

      <div class="form-group">
        <label for="meeting-held-place">Meeting Place</label>
        <input
          id="meeting-held-place"
          type="text"
          placeholder="Enter meeting held place"
          class="form-input"
          name="meetingHeldPlace"
          autocomplete="off"
        />
      </div>

      <div class="form-group">
        <div class="form-element-pair">
          <label>Agendas</label>
          <button class="btn btn-primary plus-button" (click)="addAgenda()">
            +
          </button>
        </div>
        <div class="agendas-list" formArrayName="agendas">
          @for (agenda of agendas.controls; track agenda; let $i = $index) {
            <div class="agenda-item">
              <textarea
                placeholder="Double click to delete"
                class="form-input"
                autocomplete="off"
                [formControlName]="$i"
                (dblclick)="deleteAgenda($index)"
              ></textarea>
            </div>
          }
        </div>
      </div>

      <div class="form-group">
        <div class="form-element-pair">
          <label>Decisions</label>
          <button class="btn btn-primary plus-button" (click)="addDecision()">
            +
          </button>
        </div>
        <div class="decisions-list" formArrayName="decisions">
          @for (
            decision of decisions.controls;
            track decision;
            let $i = $index
          ) {
            <div class="decision-item">
              <textarea
                placeholder="Double click to delete"
                class="form-input"
                autocomplete="off"
                [formControlName]="$i"
                (dblclick)="deleteDecision($index)"
              ></textarea>
            </div>
          }
        </div>
      </div>
      <!---->
      <!-- <div class="form-actions"> -->
      <!--   <button -->
      <!--     type="submit" -->
      <!--     [disabled]="formData.invalid" -->
      <!--     (click)="onSubmit($event)" -->
      <!--     class="btn btn-primary" -->
      <!--   > -->
      <!--     Create Meeting -->
      <!--   </button> -->
      <!-- </div> -->
    </form>
  </div>
</dialog>
